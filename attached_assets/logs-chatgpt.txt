Hereâ€™s a complete view of **all the API call layers** defined across your project:

---

### ğŸ”¹ **1. Core Call Sequence (from `data_structure.txt`)**

Each customer interaction moves through this sequence:

1. **Transcript** â†’ `GET /api/v1/transcripts/CALL_46F4C703`
   *(Raw conversation and metadata)*
2. **Analysis** â†’ `GET /api/v1/analyses/ANALYSIS_CALL_46F4C7`
   *(Intent, sentiment, risk, and coaching analysis)*
3. **Plan** â†’ `GET /api/v1/plans/PLAN_ANALYSIS_CALL_4`
   *(Action plans for borrower, advisor, supervisor, and leadership)*
4. **Workflows** â†’ `GET /api/v1/workflows?plan_id=PLAN_ANALYSIS_CALL_4`
   *(Task-level breakdown with approvals and risk ratings)*

---

### ğŸ”¹ **2. Full REST API Catalog (from `openapi.json`)**

#### ğŸ§© **Transcripts**

* `GET /api/v1/transcripts` â†’ List transcripts
* `POST /api/v1/transcripts` â†’ Create transcript
* `GET /api/v1/transcripts/{id}` â†’ Get one
* `DELETE /api/v1/transcripts/{id}` â†’ Delete one

#### ğŸ” **Analyses**

* `GET /api/v1/analyses` â†’ List analyses
* `POST /api/v1/analyses` â†’ Create analysis
* `GET /api/v1/analyses/{id}` â†’ Get one
* `GET /api/v1/analyses/by-transcript/{transcript_id}` â†’ Get by transcript

#### ğŸ§  **Plans**

* `GET /api/v1/plans` â†’ List plans
* `POST /api/v1/plans` â†’ Create plan
* `GET /api/v1/plans/{id}` â†’ Get one
* `GET /api/v1/plans/by-transcript/{transcript_id}` â†’ Get plan tied to transcript

#### âš™ï¸ **Workflows**

* `GET /api/v1/workflows` â†’ List all workflows (filters: plan_id, risk_level, etc.)
* `POST /api/v1/workflows/extract-all` â†’ Auto-extract granular workflows
* `GET /api/v1/workflows/{workflow_id}` â†’ Get single workflow
* `POST /api/v1/workflows/{workflow_id}/approve` â†’ Approve workflow
* `POST /api/v1/workflows/{workflow_id}/execute` â†’ Execute workflow
* `GET /api/v1/workflows/{workflow_id}/steps` â†’ List steps
* `POST /api/v1/workflows/{workflow_id}/steps/{step_number}/execute` â†’ Execute a single step
* `GET /api/v1/workflows/{workflow_id}/steps/{step_number}/status` â†’ Check step status
* `POST /api/v1/workflows/execute-all` â†’ Execute all approved workflows

#### ğŸ“Š **Executions**

* `GET /api/v1/executions` â†’ List executions
* `GET /api/v1/executions/{execution_id}` â†’ Get execution status
* `DELETE /api/v1/executions/{execution_id}` â†’ Delete execution
* `GET /api/v1/executions/statistics` â†’ Execution stats

#### ğŸ§© **Orchestration**

* `POST /api/v1/orchestrate/run` â†’ Run full pipeline (Transcript â†’ Analysis â†’ Plan â†’ Workflows â†’ Execution)
* `GET /api/v1/orchestrate/status/{run_id}` â†’ Check orchestration run status
* `GET /api/v1/orchestrate/runs` â†’ List orchestration runs

#### ğŸ’¬ **Advisor Chat**

* `POST /api/v1/advisor/chat` â†’ Advisor assistant endpoint (non-streaming)
* `POST /api/v1/advisor/chat/stream` â†’ Streaming chat (real-time tool calls, SSE)

#### ğŸ§® **Insights**

* `GET /api/v1/insights/patterns` â†’ Discover risk/compliance patterns
* `GET /api/v1/insights/dashboard` â†’ Insights dashboard
* `POST /api/v1/insights/populate` â†’ Populate knowledge graph
* `GET /api/v1/insights/status` â†’ Graph status

#### ğŸ©º **System**

* `GET /api/v1/health` â†’ Health check
* `GET /api/v1/config` â†’ Get frontend config
* `GET /api/v1/metrics` â†’ Dashboard metrics

---

### ğŸ”¹ **3. Example Orchestration Flow**

If you want to reproduce the **end-to-end workflow**, hereâ€™s the API sequence:

| Stage           | Endpoint                              | Description                  |
| --------------- | ------------------------------------- | ---------------------------- |
| 1ï¸âƒ£ Transcript  | `POST /api/v1/transcripts`            | Upload call transcript       |
| 2ï¸âƒ£ Analysis    | `POST /api/v1/analyses`               | Run call analysis            |
| 3ï¸âƒ£ Plan        | `POST /api/v1/plans`                  | Generate action plan         |
| 4ï¸âƒ£ Workflows   | `POST /api/v1/workflows/extract-all`  | Build granular workflows     |
| 5ï¸âƒ£ Approvals   | `POST /api/v1/workflows/{id}/approve` | Supervisor/Advisor approvals |
| 6ï¸âƒ£ Execution   | `POST /api/v1/workflows/{id}/execute` | Execute workflows            |
| 7ï¸âƒ£ Insights    | `GET /api/v1/insights/dashboard`      | Review global patterns       |
| 8ï¸âƒ£ Orchestrate | `POST /api/v1/orchestrate/run`        | Run entire pipeline at once  |

---

Would you like me to **visualize** this full call chain (like a pipeline diagram showing each dependency and sub-call)?

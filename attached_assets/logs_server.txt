(venv) ujjal@DESKTOP-9359DEK:~/code/CustomerCallCenterAnalytics$ python3 server.py
üîç Validating system configuration...
‚úÖ Configuration validation passed
üóÑÔ∏è Initializing knowledge graph schema...
Initializing KuzuDB schema at: data/knowledge_graph_v2.db

=== Creating Node Tables ===
Creating Customer...
‚ö†Ô∏è  Customer already exists, skipping
Creating Transcript...
‚ö†Ô∏è  Transcript already exists, skipping
Creating Analysis...
‚ö†Ô∏è  Analysis already exists, skipping
Creating Plan...
‚ö†Ô∏è  Plan already exists, skipping
Creating Workflow...
‚ö†Ô∏è  Workflow already exists, skipping
Creating Execution...
‚ö†Ô∏è  Execution already exists, skipping
Creating Advisor...
‚ö†Ô∏è  Advisor already exists, skipping
Creating Hypothesis...
‚ö†Ô∏è  Hypothesis already exists, skipping
Creating CandidatePattern...
‚ö†Ô∏è  CandidatePattern already exists, skipping
Creating ValidatedPattern...
‚ö†Ô∏è  ValidatedPattern already exists, skipping
Creating Prediction...
‚ö†Ô∏è  Prediction already exists, skipping
Creating LearningNode...
‚ö†Ô∏è  LearningNode already exists, skipping
Creating KnowledgeEntity...
‚ö†Ô∏è  KnowledgeEntity already exists, skipping
Creating MetaLearning...
‚ö†Ô∏è  MetaLearning already exists, skipping
Creating Wisdom...
‚ö†Ô∏è  Wisdom already exists, skipping
Creating Call...
‚ö†Ô∏è  Call already exists, skipping

=== Creating Relationship Tables ===
Creating TRANSCRIPT_BELONGS_TO...
‚ö†Ô∏è  TRANSCRIPT_BELONGS_TO already exists, skipping
Creating ANALYSIS_ANALYZES...
‚ö†Ô∏è  ANALYSIS_ANALYZES already exists, skipping
Creating PLAN_PLANS_FOR...
‚ö†Ô∏è  PLAN_PLANS_FOR already exists, skipping
Creating WORKFLOW_IMPLEMENTS...
‚ö†Ô∏è  WORKFLOW_IMPLEMENTS already exists, skipping
Creating EXECUTION_EXECUTES...
‚ö†Ô∏è  EXECUTION_EXECUTES already exists, skipping
Creating HYPOTHESIS_DERIVED_FROM...
‚ö†Ô∏è  HYPOTHESIS_DERIVED_FROM already exists, skipping
Creating HYPOTHESIS_DERIVED_FROM_PLAN...
‚ö†Ô∏è  HYPOTHESIS_DERIVED_FROM_PLAN already exists, skipping
Creating HYPOTHESIS_DERIVED_FROM_EXECUTION...
‚ö†Ô∏è  HYPOTHESIS_DERIVED_FROM_EXECUTION already exists, skipping
Creating PATTERN_FORMED_FROM...
‚ö†Ô∏è  PATTERN_FORMED_FROM already exists, skipping
Creating PATTERN_VALIDATED...
‚ö†Ô∏è  PATTERN_VALIDATED already exists, skipping
Creating PREDICTION_BASED_ON...
‚ö†Ô∏è  PREDICTION_BASED_ON already exists, skipping
Creating TARGETS_CUSTOMER...
‚ö†Ô∏è  TARGETS_CUSTOMER already exists, skipping
Creating LEARNING_CONNECTS...
‚ö†Ô∏è  LEARNING_CONNECTS already exists, skipping
Creating KNOWLEDGE_EXTRACTED_FROM...
‚ö†Ô∏è  KNOWLEDGE_EXTRACTED_FROM already exists, skipping
Creating HYPOTHESIS_CONNECTS...
‚ö†Ô∏è  HYPOTHESIS_CONNECTS already exists, skipping
Creating PATTERN_INVOLVES...
‚ö†Ô∏è  PATTERN_INVOLVES already exists, skipping
Creating TRIGGERED_HYPOTHESIS...
‚ö†Ô∏è  TRIGGERED_HYPOTHESIS already exists, skipping
Creating CALL_BELONGS_TO_CUSTOMER...
‚ö†Ô∏è  CALL_BELONGS_TO_CUSTOMER already exists, skipping
Creating CALL_HANDLED_BY...
‚ö†Ô∏è  CALL_HANDLED_BY already exists, skipping
Creating CALL_HAS_TRANSCRIPT...
‚ö†Ô∏è  CALL_HAS_TRANSCRIPT already exists, skipping
Creating ADVISOR_HANDLES_WORKFLOW...
‚ö†Ô∏è  ADVISOR_HANDLES_WORKFLOW already exists, skipping
Creating ADVISOR_LEARNS_FROM...
‚ö†Ô∏è  ADVISOR_LEARNS_FROM already exists, skipping
Creating PATTERN_TEACHES_ADVISOR...
‚ö†Ô∏è  PATTERN_TEACHES_ADVISOR already exists, skipping
Creating WISDOM_DERIVED_FROM_PLAN...
‚ö†Ô∏è  WISDOM_DERIVED_FROM_PLAN already exists, skipping
Creating WISDOM_GUIDES_EXECUTION...
‚ö†Ô∏è  WISDOM_GUIDES_EXECUTION already exists, skipping
Creating WISDOM_VALIDATES_PATTERN...
‚ö†Ô∏è  WISDOM_VALIDATES_PATTERN already exists, skipping
Creating METALEARNING_ANALYZES_HYPOTHESIS...
‚ö†Ô∏è  METALEARNING_ANALYZES_HYPOTHESIS already exists, skipping
Creating METALEARNING_IMPROVES_PATTERN...
‚ö†Ô∏è  METALEARNING_IMPROVES_PATTERN already exists, skipping
Creating METALEARNING_GENERATES_WISDOM...
‚ö†Ô∏è  METALEARNING_GENERATES_WISDOM already exists, skipping

=== Schema Initialization Complete ===
All tables and relationships have been created successfully!

=== Verifying Schema ===
‚úÖ Customer: 1 nodes
‚úÖ Transcript: 2 nodes
‚úÖ Analysis: 4 nodes
‚úÖ Plan: 3 nodes
‚úÖ Workflow: 68 nodes
‚úÖ Execution: 0 nodes
‚úÖ Advisor: 1 nodes
‚úÖ Hypothesis: 4 nodes
‚úÖ CandidatePattern: 0 nodes
‚úÖ ValidatedPattern: 0 nodes
‚úÖ Prediction: 14 nodes
‚úÖ LearningNode: 0 nodes
‚úÖ KnowledgeEntity: 0 nodes
‚úÖ MetaLearning: 8 nodes
‚úÖ Wisdom: 10 nodes
‚úÖ Call: 4 nodes

üéâ KuzuDB schema initialized successfully at data/knowledge_graph_v2.db
‚úÖ Knowledge graph schema initialized successfully
‚úÖ All services initialized successfully
‚úÖ Knowledge event handling system initialized
‚úÖ Graph event handlers initialized - complete event-driven pipeline active
‚úÖ Graph event handlers initialized
‚úÖ Prediction cleanup system initialized
üöÄ Starting Customer Call Center Analytics API Server
üìö API Documentation: http://localhost:8000/docs
üåê Server URL: http://0.0.0.0:8000
‚úÖ Streamlined API with core endpoints only
INFO:     Started server process [115140]
INFO:     Waiting for application startup.
üöÄ Starting application lifespan...
‚úÖ Background prediction cleanup task started with error recovery
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
^CINFO:     Shutting down
INFO:     Waiting for application shutdown.
üõë Shutting down application...
‚úÖ All background tasks shut down
INFO:     Application shutdown complete.
INFO:     Finished server process [115140]
(venv) ujjal@DESKTOP-9359DEK:~/code/CustomerCallCenterAnalytics$ python3 server.py
üîç Validating system configuration...
‚úÖ Configuration validation passed
üóÑÔ∏è Initializing knowledge graph schema...
Initializing KuzuDB schema at: data/knowledge_graph_v2.db

=== Creating Node Tables ===
Creating Customer...
‚ö†Ô∏è  Customer already exists, skipping
Creating Transcript...
‚ö†Ô∏è  Transcript already exists, skipping
Creating Analysis...
‚ö†Ô∏è  Analysis already exists, skipping
Creating Plan...
‚ö†Ô∏è  Plan already exists, skipping
Creating Workflow...
‚ö†Ô∏è  Workflow already exists, skipping
Creating Execution...
‚ö†Ô∏è  Execution already exists, skipping
Creating Advisor...
‚ö†Ô∏è  Advisor already exists, skipping
Creating Hypothesis...
‚ö†Ô∏è  Hypothesis already exists, skipping
Creating CandidatePattern...
‚ö†Ô∏è  CandidatePattern already exists, skipping
Creating ValidatedPattern...
‚ö†Ô∏è  ValidatedPattern already exists, skipping
Creating Prediction...
‚ö†Ô∏è  Prediction already exists, skipping
Creating LearningNode...
‚ö†Ô∏è  LearningNode already exists, skipping
Creating KnowledgeEntity...
‚ö†Ô∏è  KnowledgeEntity already exists, skipping
Creating MetaLearning...
‚ö†Ô∏è  MetaLearning already exists, skipping
Creating Wisdom...
‚ö†Ô∏è  Wisdom already exists, skipping
Creating Call...
‚ö†Ô∏è  Call already exists, skipping

=== Creating Relationship Tables ===
Creating TRANSCRIPT_BELONGS_TO...
‚ö†Ô∏è  TRANSCRIPT_BELONGS_TO already exists, skipping
Creating ANALYSIS_ANALYZES...
‚ö†Ô∏è  ANALYSIS_ANALYZES already exists, skipping
Creating PLAN_PLANS_FOR...
‚ö†Ô∏è  PLAN_PLANS_FOR already exists, skipping
Creating WORKFLOW_IMPLEMENTS...
‚ö†Ô∏è  WORKFLOW_IMPLEMENTS already exists, skipping
Creating EXECUTION_EXECUTES...
‚ö†Ô∏è  EXECUTION_EXECUTES already exists, skipping
Creating HYPOTHESIS_DERIVED_FROM...
‚ö†Ô∏è  HYPOTHESIS_DERIVED_FROM already exists, skipping
Creating HYPOTHESIS_DERIVED_FROM_PLAN...
‚ö†Ô∏è  HYPOTHESIS_DERIVED_FROM_PLAN already exists, skipping
Creating HYPOTHESIS_DERIVED_FROM_EXECUTION...
‚ö†Ô∏è  HYPOTHESIS_DERIVED_FROM_EXECUTION already exists, skipping
Creating PATTERN_FORMED_FROM...
‚ö†Ô∏è  PATTERN_FORMED_FROM already exists, skipping
Creating PATTERN_VALIDATED...
‚ö†Ô∏è  PATTERN_VALIDATED already exists, skipping
Creating PREDICTION_BASED_ON...
‚ö†Ô∏è  PREDICTION_BASED_ON already exists, skipping
Creating TARGETS_CUSTOMER...
‚ö†Ô∏è  TARGETS_CUSTOMER already exists, skipping
Creating LEARNING_CONNECTS...
‚ö†Ô∏è  LEARNING_CONNECTS already exists, skipping
Creating KNOWLEDGE_EXTRACTED_FROM...
‚ö†Ô∏è  KNOWLEDGE_EXTRACTED_FROM already exists, skipping
Creating HYPOTHESIS_CONNECTS...
‚ö†Ô∏è  HYPOTHESIS_CONNECTS already exists, skipping
Creating PATTERN_INVOLVES...
‚ö†Ô∏è  PATTERN_INVOLVES already exists, skipping
Creating TRIGGERED_HYPOTHESIS...
‚ö†Ô∏è  TRIGGERED_HYPOTHESIS already exists, skipping
Creating CALL_BELONGS_TO_CUSTOMER...
‚ö†Ô∏è  CALL_BELONGS_TO_CUSTOMER already exists, skipping
Creating CALL_HANDLED_BY...
‚ö†Ô∏è  CALL_HANDLED_BY already exists, skipping
Creating CALL_HAS_TRANSCRIPT...
‚ö†Ô∏è  CALL_HAS_TRANSCRIPT already exists, skipping
Creating ADVISOR_HANDLES_WORKFLOW...
‚ö†Ô∏è  ADVISOR_HANDLES_WORKFLOW already exists, skipping
Creating ADVISOR_LEARNS_FROM...
‚ö†Ô∏è  ADVISOR_LEARNS_FROM already exists, skipping
Creating PATTERN_TEACHES_ADVISOR...
‚ö†Ô∏è  PATTERN_TEACHES_ADVISOR already exists, skipping
Creating WISDOM_DERIVED_FROM_PLAN...
‚ö†Ô∏è  WISDOM_DERIVED_FROM_PLAN already exists, skipping
Creating WISDOM_GUIDES_EXECUTION...
‚ö†Ô∏è  WISDOM_GUIDES_EXECUTION already exists, skipping
Creating WISDOM_VALIDATES_PATTERN...
‚ö†Ô∏è  WISDOM_VALIDATES_PATTERN already exists, skipping
Creating METALEARNING_ANALYZES_HYPOTHESIS...
‚ö†Ô∏è  METALEARNING_ANALYZES_HYPOTHESIS already exists, skipping
Creating METALEARNING_IMPROVES_PATTERN...
‚ö†Ô∏è  METALEARNING_IMPROVES_PATTERN already exists, skipping
Creating METALEARNING_GENERATES_WISDOM...
‚ö†Ô∏è  METALEARNING_GENERATES_WISDOM already exists, skipping

=== Schema Initialization Complete ===
All tables and relationships have been created successfully!

=== Verifying Schema ===
‚úÖ Customer: 1 nodes
‚úÖ Transcript: 2 nodes
‚úÖ Analysis: 4 nodes
‚úÖ Plan: 3 nodes
‚úÖ Workflow: 68 nodes
‚úÖ Execution: 0 nodes
‚úÖ Advisor: 1 nodes
‚úÖ Hypothesis: 4 nodes
‚úÖ CandidatePattern: 0 nodes
‚úÖ ValidatedPattern: 0 nodes
‚úÖ Prediction: 14 nodes
‚úÖ LearningNode: 0 nodes
‚úÖ KnowledgeEntity: 0 nodes
‚úÖ MetaLearning: 8 nodes
‚úÖ Wisdom: 10 nodes
‚úÖ Call: 4 nodes

üéâ KuzuDB schema initialized successfully at data/knowledge_graph_v2.db
‚úÖ Knowledge graph schema initialized successfully
‚úÖ All services initialized successfully
‚úÖ Knowledge event handling system initialized
‚úÖ Graph event handlers initialized - complete event-driven pipeline active
‚úÖ Graph event handlers initialized
‚úÖ Prediction cleanup system initialized
üöÄ Starting Customer Call Center Analytics API Server
üìö API Documentation: http://localhost:8000/docs
üåê Server URL: http://0.0.0.0:8000
‚úÖ Streamlined API with core endpoints only
INFO:     Started server process [115174]
INFO:     Waiting for application startup.
üöÄ Starting application lifespan...
‚úÖ Background prediction cleanup task started with error recovery
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     127.0.0.1:58398 - "POST /api/v1/workflows/6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b/execute HTTP/1.1" 500 Internal Server Error
{
    "body": "Workflow not found: workflow_id=6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b",
    "severity_number": 17,
    "severity_text": "ERROR",
    "attributes": {
        "code.file.path": "/home/ujjal/code/CustomerCallCenterAnalytics/src/services/workflow_execution_engine.py",
        "code.function.name": "execute_workflow",
        "code.line.number": 245
    },
    "dropped_attributes": 0,
    "timestamp": "2025-10-08T15:14:29.239917Z",
    "observed_timestamp": "2025-10-08T15:14:29.240107Z",
    "trace_id": "0x00000000000000000000000000000000",
    "span_id": "0x0000000000000000",
    "trace_flags": 0,
    "resource": {
        "attributes": {
            "telemetry.sdk.language": "python",
            "telemetry.sdk.name": "opentelemetry",
            "telemetry.sdk.version": "1.36.0",
            "service.name": "xai",
            "service.version": "1.0.0"
        },
        "schema_url": ""
    },
    "event_name": ""
}
{
    "body": "Workflow execution failed: workflow_id=6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b, executed_by=Supervisor_AI, duration=4ms",
    "severity_number": 17,
    "severity_text": "ERROR",
    "attributes": {
        "code.file.path": "/home/ujjal/code/CustomerCallCenterAnalytics/src/services/workflow_execution_engine.py",
        "code.function.name": "execute_workflow",
        "code.line.number": 429,
        "exception.type": "ValueError",
        "exception.message": "Workflow not found: 6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b",
        "exception.stacktrace": "Traceback (most recent call last):\n  File \"/home/ujjal/code/CustomerCallCenterAnalytics/src/services/workflow_execution_engine.py\", line 246, in execute_workflow\n    raise ValueError(f\"Workflow not found: {workflow_id}\")\nValueError: Workflow not found: 6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b\n"
    },
    "dropped_attributes": 0,
    "timestamp": "2025-10-08T15:14:29.240524Z",
    "observed_timestamp": "2025-10-08T15:14:29.240655Z",
    "trace_id": "0x00000000000000000000000000000000",
    "span_id": "0x0000000000000000",
    "trace_flags": 0,
    "resource": {
        "attributes": {
            "telemetry.sdk.language": "python",
            "telemetry.sdk.name": "opentelemetry",
            "telemetry.sdk.version": "1.36.0",
            "service.name": "xai",
            "service.version": "1.0.0"
        },
        "schema_url": ""
    },
    "event_name": ""
}
{
    "body": "Workflow execution failed: workflow_id=6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b, executed_by=Supervisor_AI",
    "severity_number": 17,
    "severity_text": "ERROR",
    "attributes": {
        "code.file.path": "/home/ujjal/code/CustomerCallCenterAnalytics/server.py",
        "code.function.name": "execute_workflow",
        "code.line.number": 764,
        "exception.type": "Exception",
        "exception.message": "Workflow execution failed for 6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b: Workflow not found: 6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b",
        "exception.stacktrace": "Traceback (most recent call last):\n  File \"/home/ujjal/code/CustomerCallCenterAnalytics/src/services/workflow_execution_engine.py\", line 246, in execute_workflow\n    raise ValueError(f\"Workflow not found: {workflow_id}\")\nValueError: Workflow not found: 6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/ujjal/code/CustomerCallCenterAnalytics/server.py\", line 754, in execute_workflow\n    result = await workflow_service.execute_workflow(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/ujjal/code/CustomerCallCenterAnalytics/src/services/workflow_service.py\", line 569, in execute_workflow\n    execution_result = await execution_engine.execute_workflow(workflow_id, executed_by)\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/ujjal/code/CustomerCallCenterAnalytics/src/services/workflow_execution_engine.py\", line 452, in execute_workflow\n    raise Exception(f\"Workflow execution failed for {workflow_id}: {e}\")\nException: Workflow execution failed for 6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b: Workflow not found: 6f4b83cf-f2df-4a01-ae7a-66d0f5f6003b\n"
    },
    "dropped_attributes": 0,
    "timestamp": "2025-10-08T15:14:29.264278Z",
    "observed_timestamp": "2025-10-08T15:14:29.264365Z",
    "trace_id": "0x00000000000000000000000000000000",
    "span_id": "0x0000000000000000",
    "trace_flags": 0,
    "resource": {
        "attributes": {
            "telemetry.sdk.language": "python",
            "telemetry.sdk.name": "opentelemetry",
            "telemetry.sdk.version": "1.36.0",
            "service.name": "xai",
            "service.version": "1.0.0"
        },
        "schema_url": ""
    },
    "event_name": ""
}